package priv.ivrdsl;

/*Generated by IVR DSL */

import org.dom4j.DocumentException;
import priv.ivrdsl.beans.EventBean;
import priv.ivrdsl.beans.GlobalVariableBean;
import priv.ivrdsl.impls.QueryCaseImpl;
import priv.ivrdsl.services.EventLogic;
import priv.ivrdsl.utils.VoiceOutputUtils;
import priv.ivrdsl.views.Init;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;

public class VoiceMenu implements ActionListener {


    public static VoiceMenu instance;

    public static void initHashMap() {
        EventBean Action_0_9uvhl8 = new EventBean("Home", "China-Mobile", "0");
        Action_0_9uvhl8.setAction("", true);

        Action_0_9uvhl8.setAdditions("欢迎致电申国移动");

        GlobalVariableBean.event2TriggerMap.put("0", Action_0_9uvhl8);

        EventBean Action_01_9uvhl8 = new EventBean("Action_01", "转接服务", "1");
        GlobalVariableBean.event2TriggerMap.put("01", Action_01_9uvhl8);
        Action_01_9uvhl8.setAction("call", true);
        Action_01_9uvhl8.setAdditions("分号123");
        Action_0_9uvhl8.addChild(Action_01_9uvhl8);

        EventBean Action_02_9uvhl8 = new EventBean("Action_02", "信息业务", "2");
        GlobalVariableBean.event2TriggerMap.put("02", Action_02_9uvhl8);
        Action_02_9uvhl8.setAction("info", true);
        Action_02_9uvhl8.setAdditions("tbDataPlan");
        Action_0_9uvhl8.addChild(Action_02_9uvhl8);

        EventBean Action_04_9uvhl8 = new EventBean("Action_04", "录音", "4");
        GlobalVariableBean.event2TriggerMap.put("04", Action_04_9uvhl8);
        Action_04_9uvhl8.setAction("record", true);
        Action_04_9uvhl8.setAdditions("");
        Action_0_9uvhl8.addChild(Action_04_9uvhl8);

        EventBean Action_05_9uvhl8 = new EventBean("Action_05", "人工服务", "5");
        GlobalVariableBean.event2TriggerMap.put("05", Action_05_9uvhl8);
        Action_05_9uvhl8.setAction("manual", true);
        Action_05_9uvhl8.setAdditions("");
        Action_0_9uvhl8.addChild(Action_05_9uvhl8);

        EventBean Action_09_9uvhl8 = new EventBean("Action_09", "重听", "9");
        GlobalVariableBean.event2TriggerMap.put("09", Action_09_9uvhl8);
        Action_09_9uvhl8.setAction("replay", false);
        Action_09_9uvhl8.setAdditions("");
        Action_0_9uvhl8.addChild(Action_09_9uvhl8);

        EventBean Action_00_9uvhl8 = new EventBean("Action_00", "投诉", "0");
        GlobalVariableBean.event2TriggerMap.put("00", Action_00_9uvhl8);
        Action_00_9uvhl8.setAction("menu", false);
        Action_00_9uvhl8.setAdditions("");
        Action_0_9uvhl8.addChild(Action_00_9uvhl8);

        EventBean Action_009_9uvhl8 = new EventBean("Action_009", "返回上级菜单", "9");
        GlobalVariableBean.event2TriggerMap.put("009", Action_009_9uvhl8);
        Action_009_9uvhl8.setAction("back", false);
        Action_009_9uvhl8.setAdditions("");
        Action_00_9uvhl8.addChild(Action_009_9uvhl8);

        EventBean Action_000_9uvhl8 = new EventBean("Action_000", "投诉", "0");
        GlobalVariableBean.event2TriggerMap.put("000", Action_000_9uvhl8);
        Action_000_9uvhl8.setAction("menu", false);
        Action_000_9uvhl8.setAdditions("");
        Action_00_9uvhl8.addChild(Action_000_9uvhl8);

        EventBean Action_0009_9uvhl8 = new EventBean("Action_0009", "返回上级菜单", "9");
        GlobalVariableBean.event2TriggerMap.put("0009", Action_0009_9uvhl8);
        Action_0009_9uvhl8.setAction("back", false);
        Action_0009_9uvhl8.setAdditions("");
        Action_000_9uvhl8.addChild(Action_0009_9uvhl8);

        EventBean Action_0000_9uvhl8 = new EventBean("Action_0000", "结束通话", "0");
        GlobalVariableBean.event2TriggerMap.put("0000", Action_0000_9uvhl8);
        Action_0000_9uvhl8.setAction("hangup", true);
        Action_0000_9uvhl8.setAdditions("");
        Action_000_9uvhl8.addChild(Action_0000_9uvhl8);

        EventBean Action_00a_9uvhl8 = new EventBean("Action_00a", "测试星号按键", "*");
        GlobalVariableBean.event2TriggerMap.put("00*", Action_00a_9uvhl8);
        Action_00a_9uvhl8.setAction("call", true);
        Action_00a_9uvhl8.setAdditions("");
        Action_00_9uvhl8.addChild(Action_00a_9uvhl8);

        EventBean Action_00b_9uvhl8 = new EventBean("Action_00b", "测试井号按键", "#");
        GlobalVariableBean.event2TriggerMap.put("00#", Action_00b_9uvhl8);
        Action_00b_9uvhl8.setAction("hangup", true);
        Action_00b_9uvhl8.setAdditions("");
        Action_00_9uvhl8.addChild(Action_00b_9uvhl8);

    }

    public static void main(String[] args) {
        initHashMap();
        instance = new VoiceMenu();
        VoiceMenu.initHashMap();
        Init.initView(instance);
        EventLogic.runInitSetup();
    }

    @Override
    public void actionPerformed(ActionEvent event) {
        boolean isValidVariable = !(((GlobalVariableBean.curTriggerPath == null || GlobalVariableBean.curTriggerPath.length() == 0) || GlobalVariableBean.hasFinished || !GlobalVariableBean.hasStarted));
        if (isValidVariable) {
            try {
                try {
                    if (VoiceOutputUtils.waitingThr.isAlive()) {
                        VoiceOutputUtils.waitingThr.interrupt();
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
                EventLogic.runLogic(event);
            } catch (IOException | InterruptedException | DocumentException e) {
                e.printStackTrace();
            }
        }
    }

    public static class UserInfoCase implements QueryCaseImpl {
        @Override
        public String queryCase() {
            // TODO: Override this method before executing!
        }
    }
}

